# å°çº¢ä¹¦å…¨æµç¨‹è‡ªåŠ¨åŒ–æ™ºèƒ½ä½“ (Redbook AI Agent)

**ä¸€å¥è¯ä»‹ç»**ï¼šè¾“å…¥ä¸€ä¸ªçˆ†æ¬¾ç¬”è®°é“¾æ¥ï¼ŒAI è‡ªåŠ¨å®Œæˆã€è§£æ -> ä»¿å†™ -> åˆ¶å›¾ -> å‘å¸ƒ/å­˜è‰ç¨¿ã€‘å…¨æµç¨‹ã€‚

## ğŸš€ æé€Ÿä¸Šæ‰‹ (Quick Start)

### 1. ç¯å¢ƒå‡†å¤‡
ç¡®ä¿ä½ å·²å®‰è£… `Node.js` (v16+) å’Œ `Google Chrome`ã€‚

### 2. å¯åŠ¨é˜²é£æ§æµè§ˆå™¨ (å¿…é¡»!)
ä¸ºäº†é¿å¼€å°çº¢ä¹¦çš„ä¸Šä¼ éªŒè¯ç å’Œé£æ§ï¼Œæ‰€æœ‰çš„å‘å¸ƒæ“ä½œéƒ½æ‰˜ç®¡åœ¨æœ¬åœ° Chrome å®ä¾‹ä¸­ã€‚
**è¯·åœ¨æ¯æ¬¡ä»»åŠ¡å¼€å§‹å‰ï¼Œå…ˆè¿è¡Œæ­¤è„šæœ¬å¯åŠ¨æµè§ˆå™¨ï¼Œå¹¶æ‰‹åŠ¨æ‰«ç ç™»å½•å°çº¢ä¹¦åˆ›ä½œä¸­å¿ƒã€‚**

```powershell
.\run_publisher.ps1
```

> ğŸ’¡ **æ³¨æ„**ï¼šç™»å½•åè¯·ä¿æŒè¯¥é»‘è‰²å‘½ä»¤è¡Œçª—å£å’Œ Chrome æµè§ˆå™¨çª—å£å¼€å¯ï¼Œä¸è¦å…³é—­ï¼

### 3. ä¸€é”®å…‹éš†ç¬”è®°
æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆæ›¿æ¢ä¸ºä½ æƒ³è¦å…‹éš†çš„ç¬”è®°é“¾æ¥ï¼‰ï¼š

```bash
node redbook-automator/index.js --url "https://www.xiaohongshu.com/explore/..."
```

**è¿™å°±å¥½äº†ï¼** åä¸‹æ¥å–æ¯å’–å•¡ â˜•ï¸
1.  **è§£æå™¨**ä¼šè‡ªåŠ¨æŠ“å–åŸæ–‡ã€‚
2.  **ç­–åˆ’å¸ˆ**ä¼šç”¨ Gemini Pro åˆ†æå¹¶é‡å†™æ–‡æ¡ˆï¼Œè§„åˆ’é…å›¾ã€‚
3.  **ç»˜å›¾å¸ˆ**ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€å¥—æ–°çš„å›¾ç‰‡ã€‚
4.  **å‘å¸ƒå™¨**ä¼šè‡ªåŠ¨æ§åˆ¶ä½ çš„æµè§ˆå™¨ä¸Šä¼ å›¾ç‰‡å’Œæ–‡æ¡ˆã€‚
5.  **æœ€å**ï¼šä½ åªéœ€è¦åœ¨æµè§ˆå™¨é‡Œç‚¹ä¸€ä¸‹â€œå‘å¸ƒâ€æŒ‰é’®ç¡®è®¤ã€‚

---

## ğŸ§© æ¨¡å—åŒ–æ¶æ„ (Skills Architecture)

æœ¬é¡¹ç›®é‡‡ç”¨**æ¨¡å—åŒ–æŠ€èƒ½æ¶æ„**ï¼Œç”±ä¸€ä¸ªæ€»æ§ (Automator) åè°ƒå››ä¸ªç‰¹å®šçš„æŠ€èƒ½ (Skills)ã€‚

```mermaid
graph TD
    User[ç”¨æˆ·è¾“å…¥ URL] --> Automator[ğŸ”´ Redbook Automator]
    Automator --> Parser[1. è§£æå™¨ (Parser)]
    Automator --> Planner[2. ç­–åˆ’å¸ˆ (Planner)]
    Automator --> Generator[3. ç»˜å›¾å¸ˆ (Generator)]
    Automator --> Publisher[4. å‘å¸ƒå™¨ (Publisher)]
    
    Parser --æŠ“å–--> RawData[åŸå§‹æ•°æ® JSON]
    Planner --åˆ†æ--> Draft[æ–‡æ¡ˆè‰ç¨¿ & ä½œå›¾è„šæœ¬]
    Generator --ç»˜å›¾--> Images[å›¾ç‰‡æ–‡ä»¶]
    Publisher --ä¸Šä¼ --> Chrome[æœ¬åœ°æµè§ˆå™¨ï¼ˆå·²ç™»å½•ï¼‰]
```

### 1. è§£æå™¨ (`xiaohongshu-parser`)
*   **åŠŸèƒ½**ï¼šæå–ç›®æ ‡ç¬”è®°çš„æ ‡é¢˜ã€æ­£æ–‡ã€æ ‡ç­¾å’Œ**é«˜æ¸…æ— æ°´å°åŸå›¾**ã€‚
*   **äº®ç‚¹**ï¼š
    *   **å¼ºåŠ›æŠ“å–**ï¼šä½¿ç”¨æ­£åˆ™ç›´æ¥ä»é¡µé¢æºç æå– `__INITIAL_STATE__`ï¼Œæ¯”ä¼ ç»Ÿ DOM çˆ¬è™«æ›´ç¨³å®šï¼Œèƒ½ä¸€æ¬¡æ€§è·å–æ‰€æœ‰é«˜æ¸…å¤§å›¾ã€‚
    *   **æ·±åº¦æœç´¢**ï¼šé€’å½’æŸ¥æ‰¾ JSON ç»“æ„ï¼Œé€‚åº”å°çº¢ä¹¦æ•°æ®ç»“æ„å˜åŒ–ã€‚

### 2. ç­–åˆ’å¸ˆ (`content-planner`)
*   **åŠŸèƒ½**ï¼šåŸºäº Gemini Pro æ¨¡å‹ï¼Œå¯¹åŸå§‹å†…å®¹è¿›è¡Œæ·±åº¦ä»¿å†™å’Œè§†è§‰è§„åˆ’ã€‚
*   **äº®ç‚¹**ï¼š
    *   **åŠ¨æ€é…å›¾**ï¼šæ™ºèƒ½åˆ†æå†…å®¹æ·±åº¦ï¼Œ**è‡ªåŠ¨å†³å®šç”Ÿæˆ 4-8 å¼ å›¾ç‰‡**ï¼Œå¹¶ä¼˜å…ˆå‚è€ƒåŸç¬”è®°å›¾ç‰‡æ•°é‡ã€‚
    *   **ä¸¥æ ¼é£æ§**ï¼šæ ‡é¢˜ä¸¥æ ¼æ§åˆ¶åœ¨ **20å­—ç¬¦ä»¥å†…**ï¼Œç¬¦åˆå°çº¢ä¹¦ SEO è§„èŒƒã€‚
    *   **è§†è§‰è„šæœ¬**ï¼šä¸ºæ¯å¼ å›¾ç”Ÿæˆè¯¦ç»†çš„æ„å›¾ã€é…è‰²å’Œæ–‡å­—æ’ç‰ˆæŒ‡ä»¤ã€‚

### 3. ç»˜å›¾å¸ˆ (`infographic-generator`)
*   **åŠŸèƒ½**ï¼šæ ¹æ®ç­–åˆ’å¸ˆçš„è„šæœ¬ï¼Œæ‰¹é‡ç”Ÿæˆä¿¡æ¯å›¾ã€‚
*   **äº®ç‚¹**ï¼šæ”¯æŒæ¨¡æ¿åŒ–ç”Ÿæˆï¼Œç¡®ä¿æ•´å¥—å›¾ç‰‡é£æ ¼ç»Ÿä¸€ã€‚

### 4. å‘å¸ƒå™¨ (`xiaohongshu-publisher`)
*   **åŠŸèƒ½**ï¼šè‡ªåŠ¨ä¸Šä¼ å†…å®¹åˆ°å°çº¢ä¹¦åˆ›ä½œå¹³å°ã€‚
*   **äº®ç‚¹**ï¼š
    *   **é˜²å°å·**ï¼šé‡‡ç”¨ **Remote Debugging** æŠ€æœ¯è¿æ¥çœŸå®æµè§ˆå™¨ï¼Œå®Œå…¨æ¨¡æ‹Ÿäººå·¥æ“ä½œï¼Œé¿å¼€ Selenium/Puppeteer æŒ‡çº¹æ£€æµ‹ã€‚
    *   **å®¹é”™è®¾è®¡**ï¼šè‡ªåŠ¨å¯»æ‰¾ä¸Šä¼ å…¥å£ï¼Œæ”¯æŒå¤šç§ä¸Šä¼  UI å¸ƒå±€ã€‚

### 5. æ€»æ§ (`redbook-automator`)
*   **åŠŸèƒ½**ï¼šæµæ°´çº¿ç¼–æ’ã€‚
*   **äº®ç‚¹**ï¼šè‡ªåŠ¨ç®¡ç† `workspace` ç›®å½•ï¼Œç”Ÿæˆå”¯ä¸€çš„ Task IDï¼Œä¸²è”æ‰€æœ‰æ­¥éª¤ã€‚

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```text
redbookgen/
â”œâ”€â”€ redbook-automator/      # [æ€»æ§] æµç¨‹ç¼–æ’å…¥å£
â”œâ”€â”€ xiaohongshu-parser/     # [æŠ€èƒ½] çˆ¬è™«ä¸è§£æ
â”œâ”€â”€ content-planner/        # [æŠ€èƒ½] AI ç­–åˆ’ä¸ä»¿å†™
â”œâ”€â”€ infographic-generator/  # [æŠ€èƒ½] å›¾ç‰‡ç”Ÿæˆ
â”œâ”€â”€ xiaohongshu-publisher/  # [æŠ€èƒ½] è‡ªåŠ¨åŒ–å‘å¸ƒ
â”œâ”€â”€ workspace/              # [æ•°æ®] ä»»åŠ¡è¾“å‡ºç›®å½•
â”œâ”€â”€ .env                    # [é…ç½®] API Key è®¾ç½®
â”œâ”€â”€ run_publisher.ps1       # [è„šæœ¬] å¯åŠ¨é˜²é£æ§æµè§ˆå™¨
â””â”€â”€ package.json
```

## ğŸ› ï¸ å•ç‹¬è¿è¡Œå­æŠ€èƒ½ (é«˜çº§ç”¨æ³•)

å¦‚æœä½ æƒ³å•ç‹¬æµ‹è¯•æŸä¸ªç¯èŠ‚ï¼Œæ”¯æŒç‹¬ç«‹è¿è¡Œï¼š

**è§£æ**
```bash
node xiaohongshu-parser/index.js --url "..." --output "workspace/test/01.json"
```

**ç­–åˆ’**
```bash
node content-planner/index.js --input "workspace/test/01.json" --output-dir "workspace/test/"
```

**åˆ¶å›¾**
```bash
node infographic-generator/scripts/generate.js "workspace/test/02_visual_input.json" --output-dir "workspace/test/images/"
```

**å‘å¸ƒ**
```bash
node xiaohongshu-publisher/index.js --draft "workspace/test/02_draft.json" --images "workspace/test/images/"
```
